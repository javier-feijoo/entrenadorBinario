:root{
--bg: #0a1229; /* fondo base */
--grad1: #0d1737; /* panel superior */
--grad2: #0a1130; /* panel inferior */
--surface: #0e1a3f; /* tarjetas */
--surface-2:#0b1433;
--border: #1b2b5a; /* bordes sutiles */
--text: #ecf2ff; /* texto principal */
--muted: #a6b4d6; /* texto secundario */
--accent: #4aa8ff; /* azul vivo */
--accent-2: #18d1ff; /* cian vivo */
--good: #2bd07f; /* acierto */
--bad: #ff5a5a; /* fallo */
--warn: #f6b73c; /* aviso */
--radius: 18px;
--shadow: 0 14px 34px #00000066;
--focus: 0 0 0 3px #4aa8ffAA;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans';
color:var(--text);
background: radial-gradient(1200px 1200px at 20% 10%, #172a5a 0%, var(--bg) 45%);
}
img{max-width:100%; display:block}
code,kbd{font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}


.app{max-width:1100px; margin:0 auto; padding:1rem}


/* Header */
.site-header{position:sticky; top:.75rem; z-index:10; display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:.75rem 1rem; background:linear-gradient(180deg, var(--grad1), #0d1737cc); border:1px solid var(--border); border-radius:var(--radius); backdrop-filter: blur(6px)}
.brand{display:flex; align-items:center; gap:.75rem}
.logo{width:46px; height:46px; border-radius:14px; background:linear-gradient(135deg, var(--accent), var(--accent-2)); display:grid; place-items:center; font-weight:800; color:#00101a}
.title{font-size:1.2rem; margin:0}
.subtitle{margin:.15rem 0 0; color:var(--muted); font-size:.9rem}


.main-nav{display:flex; gap:.5rem; flex-wrap:wrap}
.btn{appearance:none; border:1px solid var(--border); background:#0a1433; color:var(--text); padding:.65rem 1rem; border-radius:12px; cursor:pointer; font-weight:650}
.btn:hover{background:#0f1c45}
.btn:focus-visible{outline:none; box-shadow:var(--focus)}
.btn.primary{background: linear-gradient(180deg, var(--accent), var(--accent-2)); color:#00111a; border-color: transparent}
.btn.good{background: linear-gradient(180deg, #5ce39a, #2bd07f); color:#032112}
.btn.bad{background: linear-gradient(180deg, #ff8a8a, #ff5a5a); color:#2a0606}
.btn.ghost{background:#0a1433; border:1px dashed var(--border)}
.btn.block{display:block; width:100%}


/* Contenido principal */
#app-root{margin-top:1rem}
.card{background:linear-gradient(180deg, var(--surface), var(--surface-2)); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow)}
.card .pad{padding:1.1rem}
.section-title{font-size: clamp(1.2rem, 1.4vw + .6rem, 1.8rem); font-weight:800; letter-spacing:.3px; margin:.1rem 0 .6rem}
.muted{color:var(--muted)}
.grid{display:grid; gap:1rem}
.grid.cols-2{grid-template-columns:1fr}
@media (min-width: 980px){ .grid.cols-2{grid-template-columns:1.2fr .8fr} }


/* Menú inicial */
.menu{max-width:860px; margin:0 auto}
.menu .hero{display:grid; grid-template-columns:1fr; gap:1rem}
@media (min-width: 980px){ .menu .hero{grid-template-columns: 1.1fr .9fr} }
.menu .big{font-size: clamp(1.6rem, 1.8vw + .8rem, 2.2rem); font-weight:900}
.menu .lead{color:var(--muted)}
.menu .actions{display:grid; gap:.6rem; grid-template-columns: 1fr}
@media (min-width: 520px){ .menu .actions{grid-template-columns: 1fr 1fr} }
.menu .warning{display:flex; align-items:center; gap:.5rem; padding:.5rem .7rem; border-radius:12px; background:#271b04; color:#ffe3b0; border:1px solid #5a3d06}


/* Footer */
.site-footer{margin:2rem 0 1rem; text-align:center; color:var(--muted)}


/* Accesibilidad */
.sr-only{position:absolute !important; width:1px !important; height:1px !important; padding:0 !important; margin:-1px !important; overflow:hidden !important; clip:rect(0,0,0,0) !important; white-space:nowrap !important; border:0 !important}


/* Placeholders de vistas posteriores */
.view-card{max-width:900px; margin:0 auto}


.menu-grid{display:grid; gap:1rem; grid-template-columns:1fr}
@media (min-width: 980px){ .menu-grid{grid-template-columns:1.2fr .8fr} }
.menu-left{display:grid; gap:1rem}
.menu-right{display:grid; gap:1rem}


.tile-actions{display:grid; gap:.8rem}
.sub{display:block; font-weight:500; font-size:.9rem; opacity:.9}


.btn-xl{font-size:1.05rem; padding:1rem 1.15rem; border-radius:14px;margin-top:5px;}
.input-lg{font-size:1.05rem; padding:0.85rem 1rem; border-radius:14px}
.label{font-weight:700; margin-bottom:.35rem}
.help{color:var(--muted); font-size:.9rem; margin:.35rem 0 .5rem}
.form-col{display:grid; gap:.4rem}


.confirm-panel{margin-top:.6rem; border:1px solid var(--border)}
.confirm-title{margin:.2rem 0 .25rem}


.info-panel .tips{margin:.4rem 0 0 1rem}
.info-panel li{margin:.2rem 0}


.bits .bit{min-width:56px; min-height:56px} 


/* HUD compacto */
.hud-bar{position:sticky; top:4.75rem; z-index:9; display:grid; grid-template-columns:1fr 1fr 1fr; align-items:center; gap:.75rem; margin: .6rem 0 0; padding:.55rem .8rem; background:linear-gradient(180deg, var(--surface), var(--surface-2)); border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow)}
@media (max-width: 720px){ .hud-bar{grid-template-columns: 1fr} .hud-right{justify-content:flex-start} }
.hud-left{display:flex; align-items:center; gap:.6rem}
.hud-user{display:grid; gap:.1rem}
.hud-name{font-weight:800}
.hud-level{color:var(--muted); font-size:.9rem}
.hud-center{display:grid; gap:.25rem}
.hud-progress{height:12px; background:#0b122680; border:1px solid var(--border); border-radius:999px; overflow:hidden}
.hud-progress-bar{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--accent-2))}
.hud-prog-text{font-variant-numeric: tabular-nums; color:var(--muted); font-size:.9rem}
.hud-right{display:flex; align-items:center; gap:1rem; justify-content:flex-end}
.hud-stat{background:#0a1433; border:1px solid var(--border); padding:.25rem .55rem; border-radius:10px}


/* Nav deshabilitado visualmente */
.main-nav .nav[disabled], .main-nav .nav.is-disabled{opacity:.45; filter:grayscale(25%); cursor:not-allowed}

/* ======== Accesibilidad y usabilidad en juegos (v2) ======== */

/* Más aire en las tarjetas de juego */
.view-card .card.pad { padding: 10px; }

/* Número objetivo: grande, centrado, muy visible */
.target-big{
  margin: .2rem auto .6rem;
  display: inline-flex; justify-content:center; align-items:center;
  min-width: 180px; padding:.4rem .9rem;
  font-size: clamp(2rem, 3.2vw + 1rem, 3rem);
  font-weight: 900; letter-spacing: .5px;
  color: #00111a; background: #ffeaa7;
  border: 2px solid #ffb703; border-radius: 14px;
  box-shadow: 0 6px 18px rgba(0,0,0,.18);
}

/* Fila de pesos (128…1) arriba, horizontal y centrada */
.weights-row{
  --bit-size: 68px;  /* tamaño base: coordina con bits-xl */
  display:flex; flex-wrap:wrap; justify-content:center; gap:.65rem;
  margin: .15rem 0 .45rem; color: var(--muted); font-size: 1rem;
}
.weights-row .w{ width: var(--bit-size); text-align:center }

/* Bits más grandes, centrados y con mejor separación */
.bits.center{ justify-content: center; }
.bits.bits-xl{ gap: .65rem; padding: .8rem; }
.bits.bits-xl .bit{
  width: var(--bit-size, 68px); height: var(--bit-size, 68px);
  font-size: 1.35rem; border-radius: 14px;
}
.bits.readonly .bit{ cursor: default; }

/* Entrada de respuesta más cómoda en tablet */
.input-lg.wide{ min-width: 260px; width: min(420px, 90%); }

/* Barra de acciones: intenta siempre visible y botón XL */
.actions{ display:flex; gap:.6rem; align-items:center; flex-wrap:wrap }
.pill.big{ font-size:1rem; padding:.45rem .7rem }

/* Texto de objetivo binario (B2D) */
.target-row{ display:grid; justify-items:center; gap:.35rem; margin-bottom:.2rem }


/* ======== JUEGO — versión estable (alineado y accesible) ======== */
/* Variables de tamaño para bits */
:root{
  --bit-gap: 12px;
  --bit-min: 64px; /* tamaño mínimo de cada celda/bit */
}

/* Contenedor lógico de la vista de juego */
.game-wrap{ display:grid; gap: .7rem; }

/* Número objetivo: centrado, legible, alto contraste */
.target-big{
  margin: .25rem auto .5rem;
  display: inline-flex; align-items:center; justify-content:center;
  min-width: 190px; padding:.55rem 1.05rem;
  font-size: clamp(2.1rem, 3.2vw + 1.1rem, 3.2rem);
  font-weight: 900; letter-spacing: .4px;
  color:#0b0e18; background:#ffeaa7;
  border:2px solid #ffb703; border-radius: 16px;
  box-shadow: 0 6px 18px rgba(0,0,0,.18);
}

/* GRID universal (8 columnas) — pesos y bits usan la MISMA rejilla */
.grid-8{
  display:grid;
  grid-template-columns: repeat(8, minmax(var(--bit-min), 1fr));
  gap: var(--bit-gap);
  align-items:center;
  justify-items:center;
  width: 100%;
}

/* PESOS (128…1) — arriba, centrados, con números tabulares */
.weights-row{
  color: var(--muted);
  font-variant-numeric: tabular-nums;
}
.weights-row .w{
  width:100%;
  text-align:center;
  line-height:1.2;
  font-size: clamp(.9rem, 1vw + .45rem, 1.05rem);
}

/* BITS — cuadrados, grandes, dentro de la misma grid */
.bits-grid .bit{
  width:100%;
  aspect-ratio: 1 / 1;                 /* siempre cuadrado */
  font-size: clamp(1.15rem, 2.2vw, 1.6rem);
  border-radius: 14px;
}
/* Estados visuales de los bits (con contraste alto) */
.bit[data-on="1"]{
  background: linear-gradient(180deg, #86efac, #34d399);
  color:#062215; border-color:#2fb37f;
}
.bit[data-on="0"]{
  background: linear-gradient(180deg, #141c40, #0b1226);
  color:#e5e7eb; border-color:#2a3558;
}
.bit:focus-visible{ outline:none; box-shadow: var(--focus); }

/* Acciones bajo los bits: intentos a la izquierda, comprobar a la derecha */
.actions-row{
  display:flex; align-items:center; justify-content:space-between;
  gap:.8rem; margin-top:.65rem;
}
.pill.big{ font-size:1rem; padding:.5rem .75rem }
.btn-xl{ font-size:1.06rem; padding:.9rem 1.15rem; border-radius:14px }

/* Entrada grande (Bin→Dec) para tablet */
.input-lg.wide{ min-width: 260px; width: min(460px, 92%); }

/* Más aire inferior para no chocar con el footer */
.view-card .card.pad{ padding-bottom: 1.6rem; }

/* --- IMPORTANTES: anulan reglas antiguas que causaban el fallo --- */
/* Antes estaban en flex: las forzamos a grid aquí con mayor especificidad */
.view-card .weights-row{ display: grid !important; }
.view-card .bits.center{ justify-content: initial !important; }
.view-card .bits.bits-xl{ gap: var(--bit-gap) !important; padding: 0 !important; }

/* --- Fix visibilidad de ayudas (128…1) --- */
[hidden] { display: none !important; }              /* refuerza el atributo hidden */
.weights-row[hidden] { display: none !important; }  /* por si hay reglas con !important */

/* ===== Barra de controles de juego (toggle ayuda + hint) ===== */
.helpbar{
  display:flex; gap:1rem; align-items:center; justify-content:flex-end;
  margin:.25rem 0 .4rem;
}
@media (max-width:720px){ .helpbar{ justify-content:center; flex-wrap:wrap; } }
.helpbar .hint{
  font-weight:700; padding:.35rem .6rem; border-radius:999px;
  background:#0a1433; border:1px solid var(--border);
}

/* ===== Switch accesible (checkbox + etiqueta) ===== */
.switch{
  display:inline-flex; align-items:center; gap:.6rem; user-select:none;
  font-weight:700;
}
.switch input{
  /* checkbox accesible pero oculto visualmente */
  position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0 0 0 0);
}
.switch .track{
  --w:64px; --h:34px;
  position:relative; width:var(--w); height:var(--h);
  background:#1c2a55; border:1px solid var(--border); border-radius:999px;
  box-shadow: inset 0 2px 6px rgba(0,0,0,.35);
}
.switch .knob{
  position:absolute; top:2px; left:2px; width:calc(var(--h) - 4px); height:calc(var(--h) - 4px);
  border-radius:999px; background:#e5e7eb; box-shadow:0 2px 6px rgba(0,0,0,.35);
  transition:transform .18s ease;
}
.switch .labels{ display:flex; gap:.35rem; }
.switch .yes, .switch .no{ font-variant:small-caps; letter-spacing:.5px; }
.switch .yes{ color:#10b981; }      /* SI en verde */
.switch .no{ color:#ef4444; }       /* NO en rojo */

/* Estado checked */
.switch input:checked + .track .knob{ transform: translateX(calc(var(--w) - var(--h))); }
.switch input:checked + .track{ background:#0f5132; border-color:#1ea97a; }

/* Focus accesible */
.switch input:focus-visible + .track{ outline:3px solid #7dd3fc; outline-offset:2px; }

/* ===== Overlay modal elegante ===== */
.modal-backdrop{
  position:fixed; inset:0; background:rgba(3,10,28,.6);
  backdrop-filter: blur(2px);
  display:flex; align-items:center; justify-content:center;
  z-index: 1000;
}
.modal-card{
  width:min(560px, 92vw);
  background:linear-gradient(180deg,#0b1226,#0a1433);
  border:1px solid var(--border);
  border-radius:18px; box-shadow:0 18px 60px rgba(0,0,0,.45);
  color:var(--text);
}
.modal-card .head{
  display:flex; align-items:center; justify-content:space-between;
  padding:.9rem 1.1rem; border-bottom:1px dashed var(--border);
}
.modal-card .body{ padding:1.1rem; }
.modal-card .actions{
  display:flex; gap:.6rem; justify-content:flex-end;
  padding:0 1.1rem 1.1rem;
}
.modal-title{ font-weight:900; font-size:1.25rem; }
.modal-badge{
  display:flex; align-items:center; gap:.6rem;
  background:#0a1433; border:1px solid var(--border);
  border-radius:12px; padding:.45rem .7rem; margin:.6rem 0;
}
.modal-badge img{ width:40px; height:40px; border-radius:8px }

/* ===== Visual refinado: bits, espacios y mensajes ===== */
:root{ --bit-min: 70px; --bit-gap: 14px; }          /* más grandes y aireados */
.view-card .card.pad{ padding: 1.2rem 1.2rem 1.8rem; }

.weights-row{ color:#a9b4d0; }                       /* ayuda un poco más clara */

.bits-grid{ margin-top:.2rem; }
.bits-grid .bit{
  background: #0f1633;                               /* más claro que el card */
  border:1px solid #253160;
  box-shadow: 0 4px 12px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.03);
}
.bits-grid .bit:hover{ transform: translateY(-1px); }
.bit[data-on="1"]{
  background: linear-gradient(180deg,#2dd4bf,#10b981);
  color:#052b21; border-color:#0ea87f; box-shadow: 0 6px 16px rgba(16,185,129,.35);
}
.bit[data-on="0"]{
  background: #141d42; color:#e6ebff; border-color:#2b3a72;
}

/* Barra de ayuda (toggle) arriba y a la derecha, con aire */
.helpbar{ margin:.35rem 0 .55rem; gap:1rem; }

/* Mensajes de feedback con caja visible */
.feedback{
  margin-top:.8rem; padding:.6rem .8rem; border-radius:12px;
  border:1px solid var(--border); background:#0b132e; color:#dbe7ff;
}
.feedback.ok{ border-color:#1ea97a; background:#0d2b1f; color:#d7ffed; }
.feedback.err{ border-color:#b45353; background:#2b1114; color:#ffe3e3; }

/* Que hidden gane a cualquier display previo */
[hidden]{ display:none !important; }
.weights-row[hidden]{ display:none !important; }